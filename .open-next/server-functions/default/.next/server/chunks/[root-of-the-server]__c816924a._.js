module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},91990,e=>{"use strict";let t="https://waterservices.usgs.gov/nwis",r="https://hydro.nationalmap.gov/arcgis/rest/services";async function a(e,r,a,s){let n=`${e},${r},${a},${s}`,o=`${t}/site/?format=rdb&bBox=${n}&siteOutput=expanded&siteStatus=active&siteType=ST&hasDataTypeCd=iv`,i=await fetch(o);if(!i.ok)throw Error(`USGS API error: ${i.status}`);return d(await i.text())}async function s(e){let r=`${t}/site/?format=rdb&huc=${e}&siteOutput=expanded&siteStatus=active&siteType=ST&hasDataTypeCd=iv`,a=await fetch(r);if(!a.ok)throw Error(`USGS API error: ${a.status}`);return d(await a.text())}async function n(e,r=["00060","00065","00010"]){let a=e.join(","),s=r.join(","),o=`${t}/iv/?format=json&sites=${a}&parameterCd=${s}&siteStatus=all`,i=await fetch(o);if(!i.ok)throw Error(`USGS API error: ${i.status}`);return function(e){let t=new Map;if(!e.value?.timeSeries)return[];for(let r of e.value.timeSeries){let e=r.sourceInfo.siteCode[0]?.value,a=r.variable.variableCode[0]?.value;if(e&&r.values[0]?.value)for(let s of r.values[0].value){let r=`${e}_${s.dateTime}`;t.has(r)||t.set(r,{siteId:e,timestamp:s.dateTime,dischargeCfs:null,gageHeightFt:null,waterTempCelsius:null,dissolvedOxygenMgL:null,ph:null,specificConductance:null,turbidityNtu:null});let n=t.get(r),o=parseFloat(s.value);if(!isNaN(o))switch(a){case"00060":n.dischargeCfs=o;break;case"00065":n.gageHeightFt=o;break;case"00010":n.waterTempCelsius=o;break;case"00300":n.dissolvedOxygenMgL=o;break;case"00400":n.ph=o;break;case"00095":n.specificConductance=o;break;case"63680":n.turbidityNtu=o}}}return Array.from(t.values())}(await i.json())}async function o(e,t){let a=`${r}/wbd/MapServer/6/query?geometry=${t},${e}&geometryType=esriGeometryPoint&inSR=4326&spatialRel=esriSpatialRelIntersects&outFields=*&returnGeometry=true&f=geojson`,s=await fetch(a);if(!s.ok)throw Error(`USGS NHD API error: ${s.status}`);let n=await s.json();if(!n.features||0===n.features.length)return null;let o=n.features[0],i=o.properties,l=i.huc12||i.HUC12;return{huc12:l,huc10:l.substring(0,10),huc8:l.substring(0,8),huc6:l.substring(0,6),huc4:l.substring(0,4),huc2:l.substring(0,2),name:i.name||i.NAME,areaSqKm:i.areasqkm||i.AREASQKM||0,states:i.states||i.STATES||"",centroidLat:e,centroidLng:t,boundaryGeoJson:o.geometry}}async function i(e){let t=`${r}/wbd/MapServer/6/query?where=HUC12='${e}'&outFields=*&returnGeometry=true&f=geojson`,a=await fetch(t);if(!a.ok)throw Error(`USGS NHD API error: ${a.status}`);let s=await a.json();if(!s.features||0===s.features.length)return null;let n=s.features[0],o=n.properties,i=function(e){let t=0,r=0,a=0;function s(e){for(let s of e)r+=s[0],t+=s[1],a++}if("Polygon"===e.type)s(e.coordinates[0]);else if("MultiPolygon"===e.type)for(let t of e.coordinates)s(t[0]);return{lat:a>0?t/a:0,lng:a>0?r/a:0}}(n.geometry),l=o.huc12||o.HUC12;return{huc12:l,huc10:l.substring(0,10),huc8:l.substring(0,8),huc6:l.substring(0,6),huc4:l.substring(0,4),huc2:l.substring(0,2),name:o.name||o.NAME,areaSqKm:o.areasqkm||o.AREASQKM||0,states:o.states||o.STATES||"",centroidLat:i.lat,centroidLng:i.lng,boundaryGeoJson:n.geometry}}async function l(e){let t=`${r}/wbd/MapServer/6/query?where=TOHUC='${e}'&outFields=HUC12&returnGeometry=false&f=json`,a=await fetch(t);if(!a.ok)throw Error(`USGS NHD API error: ${a.status}`);return(await a.json()).features.map(e=>e.attributes.HUC12)}async function u(e,t,a,s){let n=`${e},${t},${a},${s}`,o=`${r}/nhd/MapServer/6/query?geometry=${n}&geometryType=esriGeometryEnvelope&inSR=4326&spatialRel=esriSpatialRelIntersects&outFields=GNIS_NAME,LENGTHKM,FCODE,STREAMORDE&returnGeometry=true&f=geojson`,i=await fetch(o);if(!i.ok)throw Error(`USGS NHD API error: ${i.status}`);return await i.json()}function d(e){let t=e.split("\n"),r=[],a=-1,s=[];for(let e=0;e<t.length;e++){let n=t[e].trim();if(n.startsWith("#")||""===n)continue;if(-1===a){s=n.split("	"),a=e;continue}if(n.match(/^[\d\-s]+$/))continue;let o=n.split("	"),i={};s.forEach((e,t)=>{i[e]=o[t]||""}),i.site_no&&r.push({siteId:i.site_no,siteName:i.station_nm||"",latitude:parseFloat(i.dec_lat_va)||0,longitude:parseFloat(i.dec_long_va)||0,stateCode:i.state_cd||"",countyName:i.county_nm||"",drainageAreaSqMi:i.drain_area_va?parseFloat(i.drain_area_va):null,datumElevationFt:i.alt_va?parseFloat(i.alt_va):null,siteType:i.site_tp_cd||""})}return r}e.s(["fetchFlowlines",()=>u,"fetchInstantaneousValues",()=>n,"fetchStreamGaugesByBoundingBox",()=>a,"fetchStreamGaugesByHuc",()=>s,"fetchUpstreamWatersheds",()=>l,"fetchWatershedByHuc12",()=>i,"fetchWatershedByPoint",()=>o])},86279,e=>{"use strict";var t=e.i(47909),r=e.i(74017),a=e.i(96250),s=e.i(59756),n=e.i(61916),o=e.i(14444),i=e.i(37092),l=e.i(69741),u=e.i(16795),d=e.i(87718),c=e.i(95169),p=e.i(47587),h=e.i(66012),f=e.i(70101),g=e.i(26937),v=e.i(10372),m=e.i(93695);e.i(52474);var w=e.i(220),y=e.i(89171),x=e.i(91990);async function R(e){try{let{searchParams:t}=new URL(e.url),r=t.get("west"),a=t.get("south"),s=t.get("east"),n=t.get("north");if(!r||!a||!s||!n)return y.NextResponse.json({error:"Bounding box (west, south, east, north) is required"},{status:400});let o={west:parseFloat(r),south:parseFloat(a),east:parseFloat(s),north:parseFloat(n)};if(Object.values(o).some(isNaN))return y.NextResponse.json({error:"Invalid bounding box coordinates"},{status:400});let i=Math.abs(o.east-o.west),l=Math.abs(o.north-o.south);if(i>2||l>2)return y.NextResponse.json({error:"Bounding box too large. Maximum 2 degrees width and height."},{status:400});let u=await (0,x.fetchFlowlines)(o.west,o.south,o.east,o.north);return y.NextResponse.json({success:!0,bounds:o,flowlines:u})}catch(e){return console.error("Flowlines API error:",e),y.NextResponse.json({error:"Failed to fetch flowlines data"},{status:500})}}e.s(["GET",()=>R],30968);var b=e.i(30968);let E=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/flowlines/route",pathname:"/api/flowlines",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/flowlines/route.ts",nextConfigOutput:"standalone",userland:b}),{workAsyncStorage:S,workUnitAsyncStorage:C,serverHooks:A}=E;function N(){return(0,a.patchFetch)({workAsyncStorage:S,workUnitAsyncStorage:C})}async function T(e,t,a){E.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let y="/api/flowlines/route";y=y.replace(/\/index$/,"")||"/";let x=await E.prepare(e,t,{srcPage:y,multiZoneDraftMode:!1});if(!x)return t.statusCode=400,t.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve()),null;let{buildId:R,params:b,nextConfig:S,parsedUrl:C,isDraftMode:A,prerenderManifest:N,routerServerContext:T,isOnDemandRevalidate:$,revalidateOnlyGenerated:_,resolvedPathname:k,clientReferenceManifest:j,serverActionsManifest:M}=x,P=(0,l.normalizeAppPath)(y),H=!!(N.dynamicRoutes[P]||N.routes[k]),U=async()=>((null==T?void 0:T.render404)?await T.render404(e,t,C,!1):t.end("This page could not be found"),null);if(H&&!A){let e=!!N.routes[k],t=N.dynamicRoutes[P];if(t&&!1===t.fallback&&!e){if(S.experimental.adapterPath)return await U();throw new m.NoFallbackError}}let q=null;!H||E.isDev||A||(q="/index"===(q=k)?"/":q);let I=!0===E.isDev||!H,F=H&&!I;M&&j&&(0,o.setReferenceManifestsSingleton)({page:y,clientReferenceManifest:j,serverActionsManifest:M,serverModuleMap:(0,i.createServerModuleMap)({serverActionsManifest:M})});let O=e.method||"GET",G=(0,n.getTracer)(),D=G.getActiveScopeSpan(),B={params:b,prerenderManifest:N,renderOpts:{experimental:{authInterrupts:!!S.experimental.authInterrupts},cacheComponents:!!S.cacheComponents,supportsDynamicResponse:I,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:S.cacheLife,waitUntil:a.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,a)=>E.onRequestError(e,t,a,T)},sharedContext:{buildId:R}},K=new u.NodeNextRequest(e),L=new u.NodeNextResponse(t),W=d.NextRequestAdapter.fromNodeNextRequest(K,(0,d.signalFromNodeResponse)(t));try{let o=async e=>E.handle(W,B).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=G.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let a=r.get("next.route");if(a){let t=`${O} ${a}`;e.setAttributes({"next.route":a,"http.route":a,"next.span_name":t}),e.updateName(t)}else e.updateName(`${O} ${y}`)}),i=!!(0,s.getRequestMeta)(e,"minimalMode"),l=async s=>{var n,l;let u=async({previousCacheEntry:r})=>{try{if(!i&&$&&_&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await o(s);e.fetchMetrics=B.renderOpts.fetchMetrics;let l=B.renderOpts.pendingWaitUntil;l&&a.waitUntil&&(a.waitUntil(l),l=void 0);let u=B.renderOpts.collectedTags;if(!H)return await (0,h.sendResponse)(K,L,n,B.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(n.headers);u&&(t[v.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==B.renderOpts.collectedRevalidate&&!(B.renderOpts.collectedRevalidate>=v.INFINITE_CACHE)&&B.renderOpts.collectedRevalidate,a=void 0===B.renderOpts.collectedExpire||B.renderOpts.collectedExpire>=v.INFINITE_CACHE?void 0:B.renderOpts.collectedExpire;return{value:{kind:w.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:a}}}}catch(t){throw(null==r?void 0:r.isStale)&&await E.onRequestError(e,t,{routerKind:"App Router",routePath:y,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:F,isOnDemandRevalidate:$})},T),t}},d=await E.handleResponse({req:e,nextConfig:S,cacheKey:q,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:N,isRoutePPREnabled:!1,isOnDemandRevalidate:$,revalidateOnlyGenerated:_,responseGenerator:u,waitUntil:a.waitUntil,isMinimalMode:i});if(!H)return null;if((null==d||null==(n=d.value)?void 0:n.kind)!==w.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(l=d.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});i||t.setHeader("x-nextjs-cache",$?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),A&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let c=(0,f.fromNodeOutgoingHttpHeaders)(d.value.headers);return i&&H||c.delete(v.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||c.get("Cache-Control")||c.set("Cache-Control",(0,g.getCacheControlHeader)(d.cacheControl)),await (0,h.sendResponse)(K,L,new Response(d.value.body,{headers:c,status:d.value.status||200})),null};D?await l(D):await G.withPropagatedContext(e.headers,()=>G.trace(c.BaseServerSpan.handleRequest,{spanName:`${O} ${y}`,kind:n.SpanKind.SERVER,attributes:{"http.method":O,"http.target":e.url}},l))}catch(t){if(t instanceof m.NoFallbackError||await E.onRequestError(e,t,{routerKind:"App Router",routePath:P,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:F,isOnDemandRevalidate:$})}),H)throw t;return await (0,h.sendResponse)(K,L,new Response(null,{status:500})),null}}e.s(["handler",()=>T,"patchFetch",()=>N,"routeModule",()=>E,"serverHooks",()=>A,"workAsyncStorage",()=>S,"workUnitAsyncStorage",()=>C],86279)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__c816924a._.js.map
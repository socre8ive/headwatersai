module.exports=[79832,43793,e=>{"use strict";function r(){return crypto.randomUUID()}function t(){return new Date().toISOString().replace("T"," ").split(".")[0]}async function n(e){let t=new TextEncoder,n=t.encode(e),a=Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",n))).map(e=>e.toString(16).padStart(2,"0")).join(""),s=r().replace(/-/g,"").substring(0,16),i=Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t.encode(s+a)))).map(e=>e.toString(16).padStart(2,"0")).join("");return`${s}:${i}`}async function a(e,r){let[t,n]=r.split(":");if(!t||!n)return!1;let a=new TextEncoder,s=a.encode(e),i=Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",s))).map(e=>e.toString(16).padStart(2,"0")).join("");return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",a.encode(t+i)))).map(e=>e.toString(16).padStart(2,"0")).join("")===n}async function s(e,a,s,i){if(await e.prepare("SELECT id FROM users WHERE email = ?").bind(a.toLowerCase()).first())return{success:!1,error:"Email already registered"};let c=await n(s),u=r(),d=t();await e.prepare(`INSERT INTO users (id, email, password_hash, full_name, subscription_tier, created_at, updated_at)
       VALUES (?, ?, ?, ?, 'free', ?, ?)`).bind(u,a.toLowerCase(),c,i||null,d,d).run();let l=await o(e,u);return{success:!0,user:{id:u,email:a.toLowerCase(),fullName:i||null,subscriptionTier:"free",stripeCustomerId:null,stripeSubscriptionId:null,createdAt:d,updatedAt:d},session:l}}async function i(e,r,t){let n=await e.prepare(`SELECT id, email, password_hash, full_name, subscription_tier,
              stripe_customer_id, stripe_subscription_id, created_at, updated_at
       FROM users WHERE email = ?`).bind(r.toLowerCase()).first();if(!n||!await a(t,n.password_hash))return{success:!1,error:"Invalid email or password"};let s=await o(e,n.id);return{success:!0,user:{id:n.id,email:n.email,fullName:n.full_name,subscriptionTier:n.subscription_tier,stripeCustomerId:n.stripe_customer_id,stripeSubscriptionId:n.stripe_subscription_id,createdAt:n.created_at,updatedAt:n.updated_at},session:s}}async function o(e,n){let a=r(),s=new Date(new Date().getTime()+2592e6),i=t(),o=s.toISOString().replace("T"," ").split(".")[0];return await e.prepare(`INSERT INTO sessions (id, user_id, expires_at, created_at)
       VALUES (?, ?, ?, ?)`).bind(a,n,o,i).run(),{id:a,userId:n,expiresAt:o,createdAt:i}}async function c(e,r){let t=await e.prepare(`SELECT s.id as session_id, s.user_id, s.expires_at, s.created_at as session_created,
              u.id, u.email, u.full_name, u.subscription_tier,
              u.stripe_customer_id, u.stripe_subscription_id, u.created_at, u.updated_at
       FROM sessions s
       JOIN users u ON s.user_id = u.id
       WHERE s.id = ?`).bind(r).first();return t?new Date(t.expires_at.replace(" ","T")+"Z")<new Date?(await e.prepare("DELETE FROM sessions WHERE id = ?").bind(r).run(),null):{user:{id:t.id,email:t.email,fullName:t.full_name,subscriptionTier:t.subscription_tier,stripeCustomerId:t.stripe_customer_id,stripeSubscriptionId:t.stripe_subscription_id,createdAt:t.created_at,updatedAt:t.updated_at},session:{id:t.session_id,userId:t.user_id,expiresAt:t.expires_at,createdAt:t.session_created}}:null}async function u(e,r){await e.prepare("DELETE FROM sessions WHERE id = ?").bind(r).run()}e.s(["generateId",()=>r,"getCurrentTimestamp",()=>t],43793),e.s(["authenticateUser",()=>i,"createUser",()=>s,"invalidateSession",()=>u,"validateSession",()=>c],79832)},30240,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={MutableRequestCookiesAdapter:function(){return f},ReadonlyRequestCookiesError:function(){return c},RequestCookiesAdapter:function(){return u},appendMutableCookies:function(){return p},areCookiesMutableInCurrentPhase:function(){return b},createCookiesWithMutableAccessCheck:function(){return h},getModifiedCookieValues:function(){return l},responseCookiesToRequestCookies:function(){return g}};for(var a in n)Object.defineProperty(t,a,{enumerable:!0,get:n[a]});let s=e.r(472),i=e.r(30759),o=e.r(56704);class c extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new c}}class u{static seal(e){return new Proxy(e,{get(e,r,t){switch(r){case"clear":case"delete":case"set":return c.callable;default:return i.ReflectAdapter.get(e,r,t)}}})}}let d=Symbol.for("next.mutated.cookies");function l(e){let r=e[d];return r&&Array.isArray(r)&&0!==r.length?r:[]}function p(e,r){let t=l(r);if(0===t.length)return!1;let n=new s.ResponseCookies(e),a=n.getAll();for(let e of t)n.set(e);for(let e of a)n.set(e);return!0}class f{static wrap(e,r){let t=new s.ResponseCookies(new Headers);for(let r of e.getAll())t.set(r);let n=[],a=new Set,c=()=>{let e=o.workAsyncStorage.getStore();if(e&&(e.pathWasRevalidated=!0),n=t.getAll().filter(e=>a.has(e.name)),r){let e=[];for(let r of n){let t=new s.ResponseCookies(new Headers);t.set(r),e.push(t.toString())}r(e)}},u=new Proxy(t,{get(e,r,t){switch(r){case d:return n;case"delete":return function(...r){a.add("string"==typeof r[0]?r[0]:r[0].name);try{return e.delete(...r),u}finally{c()}};case"set":return function(...r){a.add("string"==typeof r[0]?r[0]:r[0].name);try{return e.set(...r),u}finally{c()}};default:return i.ReflectAdapter.get(e,r,t)}}});return u}}function h(e){let r=new Proxy(e.mutableCookies,{get(t,n,a){switch(n){case"delete":return function(...n){return y(e,"cookies().delete"),t.delete(...n),r};case"set":return function(...n){return y(e,"cookies().set"),t.set(...n),r};default:return i.ReflectAdapter.get(t,n,a)}}});return r}function b(e){return"action"===e.phase}function y(e,r){if(!b(e))throw new c}function g(e){let r=new s.RequestCookies(new Headers);for(let t of e.getAll())r.set(t);return r}},13884,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupedByCallsiteServerErrorLoggerDev",{enumerable:!0,get:function(){return c}});let n=function(e,r){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(void 0);if(t&&t.has(e))return t.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}(e.r(47540));function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}let s={current:null},i="function"==typeof n.cache?n.cache:e=>e,o=console.warn;function c(e){return function(...r){o(e(...r))}}i(e=>{try{o(s.current)}finally{s.current=null}})},7460,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"cookies",{enumerable:!0,get:function(){return f}});let n=e.r(30240),a=e.r(472),s=e.r(56704),i=e.r(32319),o=e.r(68665),c=e.r(97573),u=e.r(4642),d=e.r(13884),l=e.r(43824),p=e.r(76414);function f(){let e="cookies",r=s.workAsyncStorage.getStore(),t=i.workUnitAsyncStorage.getStore();if(r){if(t&&"after"===t.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${r.route} used \`cookies()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`cookies()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E843",enumerable:!1,configurable:!0});if(r.forceStatic)return b(n.RequestCookiesAdapter.seal(new a.RequestCookies(new Headers({}))));if(r.dynamicShouldError)throw Object.defineProperty(new c.StaticGenBailoutError(`Route ${r.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E849",enumerable:!1,configurable:!0});if(t)switch(t.type){case"cache":let s=Object.defineProperty(Error(`Route ${r.route} used \`cookies()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E831",enumerable:!1,configurable:!0});throw Error.captureStackTrace(s,f),r.invalidDynamicUsageError??=s,s;case"unstable-cache":throw Object.defineProperty(Error(`Route ${r.route} used \`cookies()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`cookies()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E846",enumerable:!1,configurable:!0});case"prerender":var d=r,y=t;let i=h.get(y);if(i)return i;let g=(0,u.makeHangingPromise)(y.renderSignal,d.route,"`cookies()`");return h.set(y,g),g;case"prerender-client":let m="`cookies`";throw Object.defineProperty(new p.InvariantError(`${m} must not be used within a Client Component. Next.js should be preventing ${m} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,o.postponeWithTracking)(r.route,e,t.dynamicTracking);case"prerender-legacy":return(0,o.throwToInterruptStaticGeneration)(e,r,t);case"prerender-runtime":return(0,o.delayUntilRuntimeStage)(t,b(t.cookies));case"private-cache":return b(t.cookies);case"request":return(0,o.trackDynamicDataInDynamicRender)(t),b((0,n.areCookiesMutableInCurrentPhase)(t)?t.userspaceMutableCookies:t.cookies)}}(0,i.throwForMissingRequestStore)(e)}e.r(18185);let h=new WeakMap;function b(e){let r=h.get(e);if(r)return r;let t=Promise.resolve(e);return h.set(e,t),t}(0,d.createDedupedByCallsiteServerErrorLoggerDev)(function(e,r){let t=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${t}used ${r}. \`cookies()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E830",enumerable:!1,configurable:!0})})},36052,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={HeadersAdapter:function(){return o},ReadonlyHeadersError:function(){return i}};for(var a in n)Object.defineProperty(t,a,{enumerable:!0,get:n[a]});let s=e.r(30759);class i extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new i}}class o extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(r,t,n){if("symbol"==typeof t)return s.ReflectAdapter.get(r,t,n);let a=t.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===a);if(void 0!==i)return s.ReflectAdapter.get(r,i,n)},set(r,t,n,a){if("symbol"==typeof t)return s.ReflectAdapter.set(r,t,n,a);let i=t.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===i);return s.ReflectAdapter.set(r,o??t,n,a)},has(r,t){if("symbol"==typeof t)return s.ReflectAdapter.has(r,t);let n=t.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0!==a&&s.ReflectAdapter.has(r,a)},deleteProperty(r,t){if("symbol"==typeof t)return s.ReflectAdapter.deleteProperty(r,t);let n=t.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===n);return void 0===a||s.ReflectAdapter.deleteProperty(r,a)}})}static seal(e){return new Proxy(e,{get(e,r,t){switch(r){case"append":case"delete":case"set":return i.callable;default:return s.ReflectAdapter.get(e,r,t)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new o(e)}append(e,r){let t=this.headers[e];"string"==typeof t?this.headers[e]=[t,r]:Array.isArray(t)?t.push(r):this.headers[e]=r}delete(e){delete this.headers[e]}get(e){let r=this.headers[e];return void 0!==r?this.merge(r):null}has(e){return void 0!==this.headers[e]}set(e,r){this.headers[e]=r}forEach(e,r){for(let[t,n]of this.entries())e.call(r,n,t,this)}*entries(){for(let e of Object.keys(this.headers)){let r=e.toLowerCase(),t=this.get(r);yield[r,t]}}*keys(){for(let e of Object.keys(this.headers)){let r=e.toLowerCase();yield r}}*values(){for(let e of Object.keys(this.headers)){let r=this.get(e);yield r}}[Symbol.iterator](){return this.entries()}}},19971,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"headers",{enumerable:!0,get:function(){return p}});let n=e.r(36052),a=e.r(56704),s=e.r(32319),i=e.r(68665),o=e.r(97573),c=e.r(4642),u=e.r(13884),d=e.r(43824),l=e.r(76414);function p(){let e="headers",r=a.workAsyncStorage.getStore(),t=s.workUnitAsyncStorage.getStore();if(r){if(t&&"after"===t.phase&&!(0,d.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${r.route} used \`headers()\` inside \`after()\`. This is not supported. If you need this data inside an \`after()\` callback, use \`headers()\` outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E839",enumerable:!1,configurable:!0});if(r.forceStatic)return h(n.HeadersAdapter.seal(new Headers({})));if(t)switch(t.type){case"cache":{let e=Object.defineProperty(Error(`Route ${r.route} used \`headers()\` inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E833",enumerable:!1,configurable:!0});throw Error.captureStackTrace(e,p),r.invalidDynamicUsageError??=e,e}case"unstable-cache":throw Object.defineProperty(Error(`Route ${r.route} used \`headers()\` inside a function cached with \`unstable_cache()\`. Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use \`headers()\` outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E838",enumerable:!1,configurable:!0})}if(r.dynamicShouldError)throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${r.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers()\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E828",enumerable:!1,configurable:!0});if(t)switch(t.type){case"prerender":var u=r,b=t;let a=f.get(b);if(a)return a;let s=(0,c.makeHangingPromise)(b.renderSignal,u.route,"`headers()`");return f.set(b,s),s;case"prerender-client":let y="`headers`";throw Object.defineProperty(new l.InvariantError(`${y} must not be used within a client component. Next.js should be preventing ${y} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,i.postponeWithTracking)(r.route,e,t.dynamicTracking);case"prerender-legacy":return(0,i.throwToInterruptStaticGeneration)(e,r,t);case"prerender-runtime":return(0,i.delayUntilRuntimeStage)(t,h(t.headers));case"private-cache":return h(t.headers);case"request":return(0,i.trackDynamicDataInDynamicRender)(t),h(t.headers)}}(0,s.throwForMissingRequestStore)(e)}e.r(18185);let f=new WeakMap;function h(e){let r=f.get(e);if(r)return r;let t=Promise.resolve(e);return f.set(e,t),t}(0,u.createDedupedByCallsiteServerErrorLoggerDev)(function(e,r){let t=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${t}used ${r}. \`headers()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E836",enumerable:!1,configurable:!0})})},21423,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"draftMode",{enumerable:!0,get:function(){return d}});let n=e.r(32319),a=e.r(56704),s=e.r(68665),i=e.r(13884),o=e.r(97573),c=e.r(65252),u=e.r(76414);function d(){let e=a.workAsyncStorage.getStore(),r=n.workUnitAsyncStorage.getStore();switch((!e||!r)&&(0,n.throwForMissingRequestStore)("draftMode"),r.type){case"prerender-runtime":return(0,s.delayUntilRuntimeStage)(r,l(r.draftMode,e));case"request":return l(r.draftMode,e);case"cache":case"private-cache":case"unstable-cache":let t=(0,n.getDraftModeProviderForCacheScope)(e,r);if(t)return l(t,e);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return l(null,e);default:return r}}function l(e,r){let t=f.get(e??p);return t||Promise.resolve(new h(e))}e.r(30759);let p={},f=new WeakMap;class h{constructor(e){this._provider=e}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){b("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){b("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function b(e,r){let t=a.workAsyncStorage.getStore(),i=n.workUnitAsyncStorage.getStore();if(t){if((null==i?void 0:i.phase)==="after")throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside \`after()\`. The enabled status of \`draftMode()\` can be read inside \`after()\` but you cannot enable or disable \`draftMode()\`. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E845",enumerable:!1,configurable:!0});if(t.dynamicShouldError)throw Object.defineProperty(new o.StaticGenBailoutError(`Route ${t.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(i)switch(i.type){case"cache":case"private-cache":{let n=Object.defineProperty(Error(`Route ${t.route} used "${e}" inside "use cache". The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E829",enumerable:!1,configurable:!0});throw Error.captureStackTrace(n,r),t.invalidDynamicUsageError??=n,n}case"unstable-cache":throw Object.defineProperty(Error(`Route ${t.route} used "${e}" inside a function cached with \`unstable_cache()\`. The enabled status of \`draftMode()\` can be read in caches but you must not enable or disable \`draftMode()\` inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E844",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let r=Object.defineProperty(Error(`Route ${t.route} used ${e} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,s.abortAndThrowOnSynchronousRequestDataAccess)(t.route,e,r,i)}case"prerender-client":let n="`draftMode`";throw Object.defineProperty(new u.InvariantError(`${n} must not be used within a Client Component. Next.js should be preventing ${n} from being included in Client Components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E832",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,s.postponeWithTracking)(t.route,e,i.dynamicTracking);case"prerender-legacy":i.revalidate=0;let a=Object.defineProperty(new c.DynamicServerError(`Route ${t.route} couldn't be rendered statically because it used \`${e}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw t.dynamicUsageDescription=e,t.dynamicUsageStack=a.stack,a;case"request":(0,s.trackDynamicDataInDynamicRender)(i)}}}(0,i.createDedupedByCallsiteServerErrorLoggerDev)(function(e,r){let t=e?`Route "${e}" `:"This route ";return Object.defineProperty(Error(`${t}used ${r}. \`draftMode()\` returns a Promise and must be unwrapped with \`await\` or \`React.use()\` before accessing its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E835",enumerable:!1,configurable:!0})})},93458,(e,r,t)=>{r.exports.cookies=e.r(7460).cookies,r.exports.headers=e.r(19971).headers,r.exports.draftMode=e.r(21423).draftMode}];

//# sourceMappingURL=_a1391b65._.js.map
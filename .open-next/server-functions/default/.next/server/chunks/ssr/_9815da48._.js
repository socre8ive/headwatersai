module.exports=[33354,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},32245,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(41997);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},7773,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},97458,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(35112),f=a.r(56704),g=a.r(7773);function h({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}return 0===c.length?null:(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},69853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(87924),e=a.r(72131),f=a.r(32245),g=a.r(97458);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},19721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(33354)._(a.r(69853));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},96599,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({onSelectLocation:a,placeholder:d="Search for a location..."}){let[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(-1),o=(0,c.useRef)(null),p=(0,c.useRef)(null),q=(0,c.useRef)(null);(0,c.useEffect)(()=>{let a=a=>{o.current&&!o.current.contains(a.target)&&l(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let r=async a=>{if(a.length<3)return void h([]);j(!0);try{let b=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(a)}.json?access_token=pk.eyJ1IjoiaGVhZHdhdGVycyIsImEiOiJjbWltZHd0NzcwaTg4M2ZvanNzdmNtbWI5In0.sQdP7AFKW7W39cxFZxQ63Q&country=US&types=address,place,locality,neighborhood,poi&limit=5`);if(!b.ok)throw Error("Geocoding failed");let c=(await b.json()).features.map(a=>({id:a.id,placeName:a.place_name,center:a.center,placeType:a.place_type[0]}));h(c),l(!0),n(-1)}catch(a){console.error("Search error:",a),h([])}finally{j(!1)}},s=b=>{f(b.placeName),l(!1),a(b.center[1],b.center[0],b.placeName)};return(0,b.jsxs)("div",{ref:o,className:"relative w-full max-w-md",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{ref:p,type:"text",value:e,onChange:a=>{let b=a.target.value;f(b),q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{r(b)},300)},onKeyDown:a=>{if(k&&0!==g.length)switch(a.key){case"ArrowDown":a.preventDefault(),n(a=>a<g.length-1?a+1:a);break;case"ArrowUp":a.preventDefault(),n(a=>a>0?a-1:a);break;case"Enter":a.preventDefault(),m>=0&&s(g[m]);break;case"Escape":l(!1)}},onFocus:()=>g.length>0&&l(!0),placeholder:d,className:"w-full px-4 py-3 pl-10 text-gray-900 bg-white border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,b.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:i?(0,b.jsxs)("svg",{className:"w-5 h-5 text-gray-400 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,b.jsx)("svg",{className:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e&&(0,b.jsx)("button",{onClick:()=>{f(""),h([]),l(!1),p.current?.focus()},className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:(0,b.jsx)("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),k&&g.length>0&&(0,b.jsx)("ul",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:g.map((a,c)=>(0,b.jsxs)("li",{onClick:()=>s(a),onMouseEnter:()=>n(c),className:`px-4 py-3 cursor-pointer flex items-start gap-3 ${c===m?"bg-blue-50":"hover:bg-gray-50"} ${c!==g.length-1?"border-b border-gray-100":""}`,children:[(0,b.jsx)("span",{className:"text-lg",children:(a=>{switch(a){case"address":default:return"ðŸ“";case"place":return"ðŸ™ï¸";case"locality":return"ðŸ˜ï¸";case"neighborhood":return"ðŸ ";case"poi":return"ðŸ“Œ"}})(a.placeType)}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:a.placeName.split(",")[0]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 truncate",children:a.placeName.split(",").slice(1).join(",").trim()})]})]},a.id))}),k&&e.length>=3&&0===g.length&&!i&&(0,b.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg p-4 text-center text-gray-500",children:"No locations found"})]})}function e({watershed:a,isLoading:c}){if(c)return(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-4"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})});if(!a)return(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,b.jsxs)("div",{className:"text-center text-gray-500",children:[(0,b.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),(0,b.jsx)("p",{className:"text-sm",children:"Click on the map or search for a location to view watershed information"})]})});let d=(.386102*a.areaSqKm).toFixed(1);return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-white",children:a.name}),(0,b.jsx)("p",{className:"text-blue-100 text-sm mt-1",children:"HUC-12 Watershed"})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Hydrologic Unit Codes"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"HUC-2 (Region)"}),(0,b.jsx)("p",{className:"font-mono text-sm font-medium text-gray-900",children:a.huc2})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"HUC-4 (Subregion)"}),(0,b.jsx)("p",{className:"font-mono text-sm font-medium text-gray-900",children:a.huc4})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"HUC-6 (Basin)"}),(0,b.jsx)("p",{className:"font-mono text-sm font-medium text-gray-900",children:a.huc6})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"HUC-8 (Subbasin)"}),(0,b.jsx)("p",{className:"font-mono text-sm font-medium text-gray-900",children:a.huc8})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"HUC-10 (Watershed)"}),(0,b.jsx)("p",{className:"font-mono text-sm font-medium text-gray-900",children:a.huc10})]}),(0,b.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[(0,b.jsx)("p",{className:"text-xs text-blue-600",children:"HUC-12 (Subwatershed)"}),(0,b.jsx)("p",{className:"font-mono text-sm font-medium text-blue-900",children:a.huc12})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Watershed Details"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Area"}),(0,b.jsxs)("span",{className:"font-medium text-gray-900",children:[a.areaSqKm.toLocaleString()," kmÂ² (",d," miÂ²)"]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"States"}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:a.states||"N/A"})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Centroid"}),(0,b.jsxs)("span",{className:"font-mono text-sm text-gray-900",children:[a.centroid.lat.toFixed(4),"Â°, ",a.centroid.lng.toFixed(4),"Â°"]})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,b.jsx)("span",{className:"text-gray-600",children:"Upstream Watersheds"}),(0,b.jsxs)("span",{className:"font-medium text-gray-900",children:[a.upstreamHuc12s.length," subwatersheds"]})]})]})]}),a.upstreamHuc12s.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Upstream HUC-12s"}),(0,b.jsx)("div",{className:"max-h-32 overflow-y-auto bg-gray-50 rounded-lg p-3",children:(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:a.upstreamHuc12s.map(a=>(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-mono font-medium bg-blue-100 text-blue-800",children:a},a))})})]})]})]})}function f({gauges:a,isLoading:c,onSelectGauge:d,selectedGaugeId:e}){return c?(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stream Gauges"}),(0,b.jsx)("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(a=>(0,b.jsxs)("div",{className:"border border-gray-100 rounded-lg p-4",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},a))})]}):0===a.length?(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stream Gauges"}),(0,b.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,b.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(0,b.jsx)("p",{className:"text-sm",children:"No stream gauges found in this area"})]})]}):(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-green-700 px-6 py-4",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-white",children:"Stream Gauges"}),(0,b.jsxs)("p",{className:"text-green-100 text-sm mt-1",children:[a.length," stations found"]})]}),(0,b.jsx)("div",{className:"divide-y divide-gray-100 max-h-96 overflow-y-auto",children:a.map(a=>{var c,f;return(0,b.jsxs)("div",{onClick:()=>d&&d(a),className:`p-4 cursor-pointer transition-colors ${e===a.siteId?"bg-green-50 border-l-4 border-green-500":"hover:bg-gray-50"}`,children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:a.siteName}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[a.county,", ",a.stateCode," â€¢ ID: ",a.siteId]})]}),a.latestReading&&(0,b.jsx)("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${null!==a.latestReading.dischargeCfs?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:null===(c=a.latestReading.dischargeCfs)?"No data":c<10?"Low flow":c<100?"Normal":c<1e3?"Moderate":c<5e3?"High":"Very high"})]}),a.latestReading?(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[(0,b.jsxs)("div",{className:"bg-gray-50 rounded p-2",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Discharge"}),(0,b.jsx)("p",{className:`text-sm font-semibold ${null===(f=a.latestReading.dischargeCfs)?"text-gray-400":f<10?"text-yellow-600":f<100?"text-green-600":f<1e3?"text-blue-600":"text-purple-600"}`,children:null!==a.latestReading.dischargeCfs?`${a.latestReading.dischargeCfs.toLocaleString()} cfs`:"â€”"})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded p-2",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Gage Height"}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:null!==a.latestReading.gageHeightFt?`${a.latestReading.gageHeightFt.toFixed(2)} ft`:"â€”"})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded p-2",children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Water Temp"}),(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:null!==a.latestReading.waterTempCelsius?`${(9*a.latestReading.waterTempCelsius/5+32).toFixed(1)}\xb0F`:"â€”"})]})]}):(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-2 italic",children:"No recent readings available"}),a.latestReading&&(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Updated: ",(a=>{try{return new Date(a).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}catch{return a}})(a.latestReading.timestamp)]}),a.drainageAreaSqMi&&(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Drainage area: ",a.drainageAreaSqMi.toLocaleString()," miÂ²"]})]},a.siteId)})})]})}function g({facilities:a,isLoading:c,onSelectFacility:d,selectedFacilityId:e}){if(c)return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"EPA Facilities"}),(0,b.jsx)("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(a=>(0,b.jsxs)("div",{className:"border border-gray-100 rounded-lg p-4",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},a))})]});if(0===a.length)return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"EPA Facilities"}),(0,b.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,b.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,b.jsx)("p",{className:"text-sm",children:"No EPA-regulated facilities found in this area"})]})]});let f=a.filter(a=>a.isMajorDischarger),g=a.filter(a=>a.violationsLast3Years>0);return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-white",children:"EPA Facilities"}),(0,b.jsxs)("p",{className:"text-orange-100 text-sm mt-1",children:[a.length," facilities â€¢ ",f.length," major dischargers"]})]}),g.length>0&&(0,b.jsx)("div",{className:"bg-red-50 border-b border-red-100 px-4 py-3",children:(0,b.jsxs)("p",{className:"text-sm text-red-800",children:[(0,b.jsxs)("span",{className:"font-semibold",children:["âš ï¸ ",g.length]})," facilities with violations in the last 3 years"]})}),(0,b.jsx)("div",{className:"divide-y divide-gray-100 max-h-96 overflow-y-auto",children:a.map(a=>{var c,f,g,h;return(0,b.jsxs)("div",{onClick:()=>d&&d(a),className:`p-4 cursor-pointer transition-colors ${e===a.registryId?"bg-orange-50 border-l-4 border-orange-500":"hover:bg-gray-50"}`,children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:a.facilityName}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[a.address.city,", ",a.address.state," ",a.address.zip]})]}),(0,b.jsxs)("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${(c=a.complianceStatus,f=a.violationsLast3Years,"Violation"===c||f>5?"bg-red-100 text-red-800":f>0?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800")}`,children:[(g=a.complianceStatus,h=a.violationsLast3Years,"Violation"===g||h>5?"ðŸš¨":h>0?"âš ï¸":"âœ…")," ",a.complianceStatus]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[a.isMajorDischarger&&(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800",children:"Major Discharger"}),a.violationsLast3Years>0&&(0,b.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:[a.violationsLast3Years," violations (3yr)"]}),a.facilityType&&(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:a.facilityType.length>30?a.facilityType.substring(0,30)+"...":a.facilityType})]}),a.npdesPermitIds.length>0&&(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["NPDES Permits: ",a.npdesPermitIds.slice(0,3).join(", "),a.npdesPermitIds.length>3&&` +${a.npdesPermitIds.length-3} more`]})}),a.lastInspectionDate&&(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Last inspection: ",new Date(a.lastInspectionDate).toLocaleDateString()]}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Registry ID: ",a.registryId]})]},a.registryId)})})]})}function h({weather:a,isLoading:c}){if(c)return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weather"}),(0,b.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,b.jsx)("div",{className:"h-24 bg-gray-200 rounded"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]});if(!a)return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weather"}),(0,b.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,b.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})}),(0,b.jsx)("p",{className:"text-sm",children:"Select a location to view weather data"})]})]});let d=a=>{try{return new Date(a).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}catch{return a}},e=a.alerts&&a.alerts.length>0,f=a.forecast&&a.forecast.periods.length>0;return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-r from-sky-600 to-sky-700 px-6 py-4",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-white",children:"Weather"}),a.forecast&&(0,b.jsxs)("p",{className:"text-sky-100 text-sm mt-1",children:["Updated: ",new Date(a.forecast.updated).toLocaleTimeString()]})]}),e&&(0,b.jsxs)("div",{className:"border-b border-gray-200",children:[(0,b.jsx)("div",{className:"bg-red-50 px-4 py-2 border-b border-red-100",children:(0,b.jsxs)("p",{className:"text-sm font-semibold text-red-800",children:["âš ï¸ ",a.alerts.length," Active Alert",a.alerts.length>1?"s":""]})}),(0,b.jsx)("div",{className:"max-h-48 overflow-y-auto",children:a.alerts.map(a=>(0,b.jsx)("div",{className:"p-4 border-b border-gray-100 last:border-b-0",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-bold ${(a=>{switch(a.toLowerCase()){case"extreme":return"bg-red-600 text-white";case"severe":return"bg-orange-500 text-white";case"moderate":return"bg-yellow-500 text-gray-900";case"minor":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}})(a.severity)}`,children:a.severity}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:a.event}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:a.headline}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-2 text-xs text-gray-500",children:[(0,b.jsxs)("span",{children:["From: ",d(a.onset)]}),(0,b.jsxs)("span",{children:["Until: ",d(a.expires)]})]}),a.instruction&&(0,b.jsx)("p",{className:"text-xs text-orange-700 mt-2 bg-orange-50 p-2 rounded",children:a.instruction.length>200?a.instruction.substring(0,200)+"...":a.instruction})]})]})},a.id))})]}),f&&(0,b.jsx)("div",{className:"p-4",children:(0,b.jsx)("div",{className:"grid grid-cols-1 gap-3",children:a.forecast.periods.slice(0,6).map(a=>{var c,d;let e;return(0,b.jsxs)("div",{className:`flex items-center gap-4 p-3 rounded-lg ${a.isDaytime?"bg-sky-50":"bg-slate-50"}`,children:[(0,b.jsx)("div",{className:"text-3xl",children:(c=a.shortForecast,d=a.isDaytime,(e=c.toLowerCase()).includes("thunder")||e.includes("storm")?"â›ˆï¸":e.includes("rain")||e.includes("shower")?"ðŸŒ§ï¸":e.includes("snow")?"â„ï¸":e.includes("cloud")||e.includes("overcast")?"â˜ï¸":e.includes("partly")?d?"â›…":"â˜ï¸":e.includes("fog")||e.includes("mist")?"ðŸŒ«ï¸":e.includes("wind")?"ðŸ’¨":d?"â˜€ï¸":"ðŸŒ™")}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:a.name}),(0,b.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[a.temperature,"Â°",a.temperatureUnit]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mt-0.5",children:a.shortForecast}),(0,b.jsxs)("div",{className:"flex gap-4 mt-1 text-xs text-gray-500",children:[(0,b.jsxs)("span",{children:["ðŸ’¨ ",a.windSpeed," ",a.windDirection]}),null!==a.probabilityOfPrecipitation&&(0,b.jsxs)("span",{children:["ðŸ’§ ",a.probabilityOfPrecipitation,"%"]})]})]})]},a.number)})})}),!e&&!f&&(0,b.jsx)("div",{className:"p-6 text-center text-gray-500",children:(0,b.jsx)("p",{className:"text-sm",children:"No weather data available"})})]})}let i=(0,a.i(19721).default)(async()=>{},{loadableGenerated:{modules:[49962]},ssr:!1,loading:()=>(0,b.jsx)("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})});function j(){let[a,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)("watershed"),[E,F]=(0,c.useState)(!0),G=(0,c.useCallback)(async(a,b)=>{v(!0);try{let c=await fetch(`/api/watershed?lat=${a}&lng=${b}`);if(c.ok){let a=await c.json();return l(a.watershed),a.watershed}}catch(a){console.error("Failed to fetch watershed:",a)}finally{v(!1)}return null},[]),H=(0,c.useCallback)(async a=>{x(!0);try{let b=await fetch(`/api/gauges?huc=${a}&readings=true`);if(b.ok){let a=await b.json();n(a.gauges)}}catch(a){console.error("Failed to fetch gauges:",a)}finally{x(!1)}},[]),I=(0,c.useCallback)(async a=>{z(!0);try{let b=await fetch(`/api/facilities?huc8=${a}`);if(b.ok){let a=await b.json();p(a.facilities)}}catch(a){console.error("Failed to fetch facilities:",a)}finally{z(!1)}},[]),J=(0,c.useCallback)(async(a,b)=>{B(!0);try{let[c,d]=await Promise.all([fetch(`/api/weather?lat=${a}&lng=${b}&type=forecast`),fetch(`/api/weather?lat=${a}&lng=${b}&type=alerts`)]),e={};c.ok&&(e.forecast=(await c.json()).forecast),d.ok&&(e.alerts=(await d.json()).alerts),r(e)}catch(a){console.error("Failed to fetch weather:",a)}finally{B(!1)}},[]),K=(0,c.useCallback)(async(a,b)=>{try{let c=await fetch(`/api/flowlines?west=${b-.15}&south=${a-.15}&east=${b+.15}&north=${a+.15}`);if(c.ok){let a=await c.json();t(a.flowlines)}}catch(a){console.error("Failed to fetch flowlines:",a)}},[]),L=(0,c.useCallback)(async(a,b,c)=>{j({lat:a,lng:b,name:c});let d=await G(a,b);d?.huc8&&(H(d.huc8),I(d.huc8)),J(a,b),K(a,b)},[G,H,I,J,K]),M=(0,c.useCallback)((a,b)=>{L(a,b)},[L]),N=(0,c.useCallback)((a,b,c)=>{L(a,b,c)},[L]),O=[{id:"watershed",label:"Watershed",count:null},{id:"gauges",label:"Gauges",count:m.length},{id:"facilities",label:"Facilities",count:o.length},{id:"weather",label:"Weather",count:q?.alerts?.length||null}];return(0,b.jsxs)("div",{className:"h-[calc(100vh-4rem)] flex",children:[(0,b.jsxs)("div",{className:`${E?"w-96":"w-0"} transition-all duration-300 flex flex-col bg-gray-50 border-r border-gray-200 overflow-hidden`,children:[(0,b.jsxs)("div",{className:"p-4 bg-white border-b border-gray-200",children:[(0,b.jsx)(d,{onSelectLocation:N,placeholder:"Search for an address or place..."}),a?.name&&(0,b.jsxs)("p",{className:"mt-2 text-sm text-gray-600 truncate",children:["ðŸ“ ",a.name]})]}),(0,b.jsx)("div",{className:"flex border-b border-gray-200 bg-white",children:O.map(a=>(0,b.jsxs)("button",{onClick:()=>D(a.id),className:`flex-1 px-3 py-3 text-sm font-medium transition-colors relative ${C===a.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[a.label,null!==a.count&&a.count>0&&(0,b.jsx)("span",{className:"ml-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-medium rounded-full bg-blue-100 text-blue-700",children:a.count}),C===a.id&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600"})]},a.id))}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:["watershed"===C&&(0,b.jsx)(e,{watershed:k,isLoading:u}),"gauges"===C&&(0,b.jsx)(f,{gauges:m,isLoading:w,onSelectGauge:a=>{j({lat:a.latitude,lng:a.longitude,name:a.siteName})}}),"facilities"===C&&(0,b.jsx)(g,{facilities:o,isLoading:y,onSelectFacility:a=>{j({lat:a.latitude,lng:a.longitude,name:a.facilityName})}}),"weather"===C&&(0,b.jsx)(h,{weather:q,isLoading:A})]})]}),(0,b.jsx)("button",{onClick:()=>F(!E),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-white border border-gray-200 rounded-r-lg p-2 shadow-md hover:bg-gray-50 transition-colors",style:{left:E?"384px":"0"},children:(0,b.jsx)("svg",{className:`w-5 h-5 text-gray-600 transition-transform ${E?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,b.jsxs)("div",{className:"flex-1 relative",children:[(0,b.jsx)(i,{initialCenter:[-105.2705,40.015],initialZoom:10,onMapClick:M,watershedBoundary:k?.boundary,flowlines:s,gauges:m.map(a=>({siteId:a.siteId,siteName:a.siteName,latitude:a.latitude,longitude:a.longitude,dischargeCfs:a.latestReading?.dischargeCfs,gageHeightFt:a.latestReading?.gageHeightFt})),facilities:o.map(a=>({registryId:a.registryId,facilityName:a.facilityName,latitude:a.latitude,longitude:a.longitude,isMajorDischarger:a.isMajorDischarger,complianceStatus:a.complianceStatus})),selectedLocation:a}),(0,b.jsxs)("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-3 text-xs text-gray-600",children:[(0,b.jsx)("p",{className:"font-semibold mb-1",children:"Map Legend"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500 border-2 border-green-700"}),(0,b.jsx)("span",{children:"Stream Gauge"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded bg-yellow-500 border-2 border-yellow-700"}),(0,b.jsx)("span",{children:"EPA Facility"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded bg-red-500 border-2 border-red-700"}),(0,b.jsx)("span",{children:"Violation"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-sm bg-blue-500 opacity-30 border border-blue-600"}),(0,b.jsx)("span",{children:"Watershed"})]})]})]})]})]})}a.s(["default",()=>j],96599)}];

//# sourceMappingURL=_9815da48._.js.map
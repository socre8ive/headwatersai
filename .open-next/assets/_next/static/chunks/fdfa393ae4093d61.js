(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67585,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let a=e.r(32061);function r({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new a.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,s)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"encodeURIPath",{enumerable:!0,get:function(){return a}})},52157,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadChunks",{enumerable:!0,get:function(){return n}});let a=e.r(43476),r=e.r(74080),l=e.r(63599),i=e.r(9885);function n({moduleIds:e}){if("undefined"!=typeof window)return null;let t=l.workAsyncStorage.getStore();if(void 0===t)return null;let s=[];if(t.reactLoadableManifest&&e){let a=t.reactLoadableManifest;for(let t of e){if(!a[t])continue;let e=a[t].files;s.push(...e)}}return 0===s.length?null:(0,a.jsx)(a.Fragment,{children:s.map(e=>{let s=`${t.assetPrefix}/_next/${(0,i.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:s,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,r.preload)(s,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return o}});let a=e.r(43476),r=e.r(71645),l=e.r(67585),i=e.r(52157);function n(e){return{default:e&&"default"in e?e.default:e}}let d={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},o=function(e){let t={...d,...e},s=(0,r.lazy)(()=>t.loader().then(n)),o=t.loading;function c(e){let n=o?(0,a.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,d=!t.ssr||!!t.loading,c=d?r.Suspense:r.Fragment,x=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(i.PreloadChunks,{moduleIds:t.modules}):null,(0,a.jsx)(s,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(c,{...d?{fallback:n}:{},children:x})}return c.displayName="LoadableComponent",c}},70703,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return r}});let a=e.r(55682)._(e.r(69093));function r(e,t){let s={};"function"==typeof e&&(s.loader=e);let r={...s,...t};return(0,a.default)({...r,modules:r.loadableGenerated?.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},20734,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(70703);function r({onSelectLocation:e,placeholder:a="Search for a location..."}){let[r,l]=(0,s.useState)(""),[i,n]=(0,s.useState)([]),[d,o]=(0,s.useState)(!1),[c,x]=(0,s.useState)(!1),[m,h]=(0,s.useState)(-1),g=(0,s.useRef)(null),u=(0,s.useRef)(null),p=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=e=>{g.current&&!g.current.contains(e.target)&&x(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let f=async e=>{if(e.length<3)return void n([]);o(!0);try{let t=await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(e)}.json?access_token=pk.eyJ1IjoiaGVhZHdhdGVycyIsImEiOiJjbWltZHd0NzcwaTg4M2ZvanNzdmNtbWI5In0.sQdP7AFKW7W39cxFZxQ63Q&country=US&types=address,place,locality,neighborhood,poi&limit=5`);if(!t.ok)throw Error("Geocoding failed");let s=(await t.json()).features.map(e=>({id:e.id,placeName:e.place_name,center:e.center,placeType:e.place_type[0]}));n(s),x(!0),h(-1)}catch(e){console.error("Search error:",e),n([])}finally{o(!1)}},b=t=>{l(t.placeName),x(!1),e(t.center[1],t.center[0],t.placeName)};return(0,t.jsxs)("div",{ref:g,className:"relative w-full max-w-md",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{ref:u,type:"text",value:r,onChange:e=>{let t=e.target.value;l(t),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{f(t)},300)},onKeyDown:e=>{if(c&&0!==i.length)switch(e.key){case"ArrowDown":e.preventDefault(),h(e=>e<i.length-1?e+1:e);break;case"ArrowUp":e.preventDefault(),h(e=>e>0?e-1:e);break;case"Enter":e.preventDefault(),m>=0&&b(i[m]);break;case"Escape":x(!1)}},onFocus:()=>i.length>0&&x(!0),placeholder:a,className:"w-full px-4 py-3 pl-10 text-gray-900 bg-white border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:d?(0,t.jsxs)("svg",{className:"w-5 h-5 text-gray-400 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,t.jsx)("svg",{className:"w-5 h-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),r&&(0,t.jsx)("button",{onClick:()=>{l(""),n([]),x(!1),u.current?.focus()},className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600",children:(0,t.jsx)("svg",{className:"w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c&&i.length>0&&(0,t.jsx)("ul",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:i.map((e,s)=>(0,t.jsxs)("li",{onClick:()=>b(e),onMouseEnter:()=>h(s),className:`px-4 py-3 cursor-pointer flex items-start gap-3 ${s===m?"bg-blue-50":"hover:bg-gray-50"} ${s!==i.length-1?"border-b border-gray-100":""}`,children:[(0,t.jsx)("span",{className:"text-lg",children:(e=>{switch(e){case"address":default:return"ðŸ“";case"place":return"ðŸ™ï¸";case"locality":return"ðŸ˜ï¸";case"neighborhood":return"ðŸ ";case"poi":return"ðŸ“Œ"}})(e.placeType)}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.placeName.split(",")[0]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.placeName.split(",").slice(1).join(",").trim()})]})]},e.id))}),c&&r.length>=3&&0===i.length&&!d&&(0,t.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg p-4 text-center text-gray-500",children:"No locations found"})]})}function l({watershed:e,isLoading:s}){if(s)return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-4"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})});if(!e)return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,t.jsxs)("div",{className:"text-center text-gray-500",children:[(0,t.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})}),(0,t.jsx)("p",{className:"text-sm",children:"Click on the map or search for a location to view watershed information"})]})});let a=(.386102*e.areaSqKm).toFixed(1);return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:e.name}),(0,t.jsx)("p",{className:"text-blue-100 text-sm mt-1",children:"HUC-12 Watershed"})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Hydrologic Unit Codes"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"HUC-2 (Region)"}),(0,t.jsx)("p",{className:"font-mono text-sm font-medium text-gray-900",children:e.huc2})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"HUC-4 (Subregion)"}),(0,t.jsx)("p",{className:"font-mono text-sm font-medium text-gray-900",children:e.huc4})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"HUC-6 (Basin)"}),(0,t.jsx)("p",{className:"font-mono text-sm font-medium text-gray-900",children:e.huc6})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"HUC-8 (Subbasin)"}),(0,t.jsx)("p",{className:"font-mono text-sm font-medium text-gray-900",children:e.huc8})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"HUC-10 (Watershed)"}),(0,t.jsx)("p",{className:"font-mono text-sm font-medium text-gray-900",children:e.huc10})]}),(0,t.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[(0,t.jsx)("p",{className:"text-xs text-blue-600",children:"HUC-12 (Subwatershed)"}),(0,t.jsx)("p",{className:"font-mono text-sm font-medium text-blue-900",children:e.huc12})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Watershed Details"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Area"}),(0,t.jsxs)("span",{className:"font-medium text-gray-900",children:[e.areaSqKm.toLocaleString()," kmÂ² (",a," miÂ²)"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"States"}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:e.states||"N/A"})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Centroid"}),(0,t.jsxs)("span",{className:"font-mono text-sm text-gray-900",children:[e.centroid.lat.toFixed(4),"Â°, ",e.centroid.lng.toFixed(4),"Â°"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Upstream Watersheds"}),(0,t.jsxs)("span",{className:"font-medium text-gray-900",children:[e.upstreamHuc12s.length," subwatersheds"]})]})]})]}),e.upstreamHuc12s.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-3",children:"Upstream HUC-12s"}),(0,t.jsx)("div",{className:"max-h-32 overflow-y-auto bg-gray-50 rounded-lg p-3",children:(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:e.upstreamHuc12s.map(e=>(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-mono font-medium bg-blue-100 text-blue-800",children:e},e))})})]})]})]})}function i({gauges:e,isLoading:s,onSelectGauge:a,selectedGaugeId:r}){return s?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stream Gauges"}),(0,t.jsx)("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"border border-gray-100 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},e))})]}):0===e.length?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stream Gauges"}),(0,t.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,t.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(0,t.jsx)("p",{className:"text-sm",children:"No stream gauges found in this area"})]})]}):(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-green-700 px-6 py-4",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-white",children:"Stream Gauges"}),(0,t.jsxs)("p",{className:"text-green-100 text-sm mt-1",children:[e.length," stations found"]})]}),(0,t.jsx)("div",{className:"divide-y divide-gray-100 max-h-96 overflow-y-auto",children:e.map(e=>{var s,l;return(0,t.jsxs)("div",{onClick:()=>a&&a(e),className:`p-4 cursor-pointer transition-colors ${r===e.siteId?"bg-green-50 border-l-4 border-green-500":"hover:bg-gray-50"}`,children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:e.siteName}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[e.county,", ",e.stateCode," â€¢ ID: ",e.siteId]})]}),e.latestReading&&(0,t.jsx)("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${null!==e.latestReading.dischargeCfs?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:null===(s=e.latestReading.dischargeCfs)?"No data":s<10?"Low flow":s<100?"Normal":s<1e3?"Moderate":s<5e3?"High":"Very high"})]}),e.latestReading?(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-3",children:[(0,t.jsxs)("div",{className:"bg-gray-50 rounded p-2",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Discharge"}),(0,t.jsx)("p",{className:`text-sm font-semibold ${null===(l=e.latestReading.dischargeCfs)?"text-gray-400":l<10?"text-yellow-600":l<100?"text-green-600":l<1e3?"text-blue-600":"text-purple-600"}`,children:null!==e.latestReading.dischargeCfs?`${e.latestReading.dischargeCfs.toLocaleString()} cfs`:"â€”"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded p-2",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Gage Height"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:null!==e.latestReading.gageHeightFt?`${e.latestReading.gageHeightFt.toFixed(2)} ft`:"â€”"})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded p-2",children:[(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Water Temp"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:null!==e.latestReading.waterTempCelsius?`${(9*e.latestReading.waterTempCelsius/5+32).toFixed(1)}\xb0F`:"â€”"})]})]}):(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-2 italic",children:"No recent readings available"}),e.latestReading&&(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Updated: ",(e=>{try{return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}catch{return e}})(e.latestReading.timestamp)]}),e.drainageAreaSqMi&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Drainage area: ",e.drainageAreaSqMi.toLocaleString()," miÂ²"]})]},e.siteId)})})]})}function n({facilities:e,isLoading:s,onSelectFacility:a,selectedFacilityId:r}){if(s)return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"EPA Facilities"}),(0,t.jsx)("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"border border-gray-100 rounded-lg p-4",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},e))})]});if(0===e.length)return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"EPA Facilities"}),(0,t.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,t.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,t.jsx)("p",{className:"text-sm",children:"No EPA-regulated facilities found in this area"})]})]});let l=e.filter(e=>e.isMajorDischarger),i=e.filter(e=>e.violationsLast3Years>0);return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-orange-600 to-orange-700 px-6 py-4",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-white",children:"EPA Facilities"}),(0,t.jsxs)("p",{className:"text-orange-100 text-sm mt-1",children:[e.length," facilities â€¢ ",l.length," major dischargers"]})]}),i.length>0&&(0,t.jsx)("div",{className:"bg-red-50 border-b border-red-100 px-4 py-3",children:(0,t.jsxs)("p",{className:"text-sm text-red-800",children:[(0,t.jsxs)("span",{className:"font-semibold",children:["âš ï¸ ",i.length]})," facilities with violations in the last 3 years"]})}),(0,t.jsx)("div",{className:"divide-y divide-gray-100 max-h-96 overflow-y-auto",children:e.map(e=>{var s,l,i,n;return(0,t.jsxs)("div",{onClick:()=>a&&a(e),className:`p-4 cursor-pointer transition-colors ${r===e.registryId?"bg-orange-50 border-l-4 border-orange-500":"hover:bg-gray-50"}`,children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:e.facilityName}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-0.5",children:[e.address.city,", ",e.address.state," ",e.address.zip]})]}),(0,t.jsxs)("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${(s=e.complianceStatus,l=e.violationsLast3Years,"Violation"===s||l>5?"bg-red-100 text-red-800":l>0?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800")}`,children:[(i=e.complianceStatus,n=e.violationsLast3Years,"Violation"===i||n>5?"ðŸš¨":n>0?"âš ï¸":"âœ…")," ",e.complianceStatus]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.isMajorDischarger&&(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800",children:"Major Discharger"}),e.violationsLast3Years>0&&(0,t.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:[e.violationsLast3Years," violations (3yr)"]}),e.facilityType&&(0,t.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:e.facilityType.length>30?e.facilityType.substring(0,30)+"...":e.facilityType})]}),e.npdesPermitIds.length>0&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:["NPDES Permits: ",e.npdesPermitIds.slice(0,3).join(", "),e.npdesPermitIds.length>3&&` +${e.npdesPermitIds.length-3} more`]})}),e.lastInspectionDate&&(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-2",children:["Last inspection: ",new Date(e.lastInspectionDate).toLocaleDateString()]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Registry ID: ",e.registryId]})]},e.registryId)})})]})}function d({weather:e,isLoading:s}){if(s)return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weather"}),(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-24 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]});if(!e)return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Weather"}),(0,t.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,t.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})}),(0,t.jsx)("p",{className:"text-sm",children:"Select a location to view weather data"})]})]});let a=e=>{try{return new Date(e).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}catch{return e}},r=e.alerts&&e.alerts.length>0,l=e.forecast&&e.forecast.periods.length>0;return(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-sky-600 to-sky-700 px-6 py-4",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-white",children:"Weather"}),e.forecast&&(0,t.jsxs)("p",{className:"text-sky-100 text-sm mt-1",children:["Updated: ",new Date(e.forecast.updated).toLocaleTimeString()]})]}),r&&(0,t.jsxs)("div",{className:"border-b border-gray-200",children:[(0,t.jsx)("div",{className:"bg-red-50 px-4 py-2 border-b border-red-100",children:(0,t.jsxs)("p",{className:"text-sm font-semibold text-red-800",children:["âš ï¸ ",e.alerts.length," Active Alert",e.alerts.length>1?"s":""]})}),(0,t.jsx)("div",{className:"max-h-48 overflow-y-auto",children:e.alerts.map(e=>(0,t.jsx)("div",{className:"p-4 border-b border-gray-100 last:border-b-0",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-bold ${(e=>{switch(e.toLowerCase()){case"extreme":return"bg-red-600 text-white";case"severe":return"bg-orange-500 text-white";case"moderate":return"bg-yellow-500 text-gray-900";case"minor":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}})(e.severity)}`,children:e.severity}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:e.event}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.headline}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-2 text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["From: ",a(e.onset)]}),(0,t.jsxs)("span",{children:["Until: ",a(e.expires)]})]}),e.instruction&&(0,t.jsx)("p",{className:"text-xs text-orange-700 mt-2 bg-orange-50 p-2 rounded",children:e.instruction.length>200?e.instruction.substring(0,200)+"...":e.instruction})]})]})},e.id))})]}),l&&(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)("div",{className:"grid grid-cols-1 gap-3",children:e.forecast.periods.slice(0,6).map(e=>{var s,a;let r;return(0,t.jsxs)("div",{className:`flex items-center gap-4 p-3 rounded-lg ${e.isDaytime?"bg-sky-50":"bg-slate-50"}`,children:[(0,t.jsx)("div",{className:"text-3xl",children:(s=e.shortForecast,a=e.isDaytime,(r=s.toLowerCase()).includes("thunder")||r.includes("storm")?"â›ˆï¸":r.includes("rain")||r.includes("shower")?"ðŸŒ§ï¸":r.includes("snow")?"â„ï¸":r.includes("cloud")||r.includes("overcast")?"â˜ï¸":r.includes("partly")?a?"â›…":"â˜ï¸":r.includes("fog")||r.includes("mist")?"ðŸŒ«ï¸":r.includes("wind")?"ðŸ’¨":a?"â˜€ï¸":"ðŸŒ™")}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:e.name}),(0,t.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:[e.temperature,"Â°",e.temperatureUnit]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mt-0.5",children:e.shortForecast}),(0,t.jsxs)("div",{className:"flex gap-4 mt-1 text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["ðŸ’¨ ",e.windSpeed," ",e.windDirection]}),null!==e.probabilityOfPrecipitation&&(0,t.jsxs)("span",{children:["ðŸ’§ ",e.probabilityOfPrecipitation,"%"]})]})]})]},e.number)})})}),!r&&!l&&(0,t.jsx)("div",{className:"p-6 text-center text-gray-500",children:(0,t.jsx)("p",{className:"text-sm",children:"No weather data available"})})]})}e.i(47167);let o=(0,a.default)(()=>e.A(12241),{loadableGenerated:{modules:[49962]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})});function c(){let[e,a]=(0,s.useState)(null),[c,x]=(0,s.useState)(null),[m,h]=(0,s.useState)([]),[g,u]=(0,s.useState)([]),[p,f]=(0,s.useState)(null),[b,y]=(0,s.useState)(null),[j,N]=(0,s.useState)(!1),[w,v]=(0,s.useState)(!1),[k,C]=(0,s.useState)(!1),[S,L]=(0,s.useState)(!1),[P,R]=(0,s.useState)("watershed"),[M,$]=(0,s.useState)(!0),F=(0,s.useCallback)(async(e,t)=>{N(!0);try{let s=await fetch(`/api/watershed?lat=${e}&lng=${t}`);if(s.ok){let e=await s.json();return x(e.watershed),e.watershed}}catch(e){console.error("Failed to fetch watershed:",e)}finally{N(!1)}return null},[]),D=(0,s.useCallback)(async e=>{v(!0);try{let t=await fetch(`/api/gauges?huc=${e}&readings=true`);if(t.ok){let e=await t.json();h(e.gauges)}}catch(e){console.error("Failed to fetch gauges:",e)}finally{v(!1)}},[]),I=(0,s.useCallback)(async e=>{C(!0);try{let t=await fetch(`/api/facilities?huc8=${e}`);if(t.ok){let e=await t.json();u(e.facilities)}}catch(e){console.error("Failed to fetch facilities:",e)}finally{C(!1)}},[]),U=(0,s.useCallback)(async(e,t)=>{L(!0);try{let[s,a]=await Promise.all([fetch(`/api/weather?lat=${e}&lng=${t}&type=forecast`),fetch(`/api/weather?lat=${e}&lng=${t}&type=alerts`)]),r={};s.ok&&(r.forecast=(await s.json()).forecast),a.ok&&(r.alerts=(await a.json()).alerts),f(r)}catch(e){console.error("Failed to fetch weather:",e)}finally{L(!1)}},[]),W=(0,s.useCallback)(async(e,t)=>{try{let s=await fetch(`/api/flowlines?west=${t-.15}&south=${e-.15}&east=${t+.15}&north=${e+.15}`);if(s.ok){let e=await s.json();y(e.flowlines)}}catch(e){console.error("Failed to fetch flowlines:",e)}},[]),H=(0,s.useCallback)(async(e,t,s)=>{a({lat:e,lng:t,name:s});let r=await F(e,t);r?.huc8&&(D(r.huc8),I(r.huc8)),U(e,t),W(e,t)},[F,D,I,U,W]),_=(0,s.useCallback)((e,t)=>{H(e,t)},[H]),A=(0,s.useCallback)((e,t,s)=>{H(e,t,s)},[H]),T=[{id:"watershed",label:"Watershed",count:null},{id:"gauges",label:"Gauges",count:m.length},{id:"facilities",label:"Facilities",count:g.length},{id:"weather",label:"Weather",count:p?.alerts?.length||null}];return(0,t.jsxs)("div",{className:"h-[calc(100vh-4rem)] flex",children:[(0,t.jsxs)("div",{className:`${M?"w-96":"w-0"} transition-all duration-300 flex flex-col bg-gray-50 border-r border-gray-200 overflow-hidden`,children:[(0,t.jsxs)("div",{className:"p-4 bg-white border-b border-gray-200",children:[(0,t.jsx)(r,{onSelectLocation:A,placeholder:"Search for an address or place..."}),e?.name&&(0,t.jsxs)("p",{className:"mt-2 text-sm text-gray-600 truncate",children:["ðŸ“ ",e.name]})]}),(0,t.jsx)("div",{className:"flex border-b border-gray-200 bg-white",children:T.map(e=>(0,t.jsxs)("button",{onClick:()=>R(e.id),className:`flex-1 px-3 py-3 text-sm font-medium transition-colors relative ${P===e.id?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[e.label,null!==e.count&&e.count>0&&(0,t.jsx)("span",{className:"ml-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-medium rounded-full bg-blue-100 text-blue-700",children:e.count}),P===e.id&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600"})]},e.id))}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4",children:["watershed"===P&&(0,t.jsx)(l,{watershed:c,isLoading:j}),"gauges"===P&&(0,t.jsx)(i,{gauges:m,isLoading:w,onSelectGauge:e=>{a({lat:e.latitude,lng:e.longitude,name:e.siteName})}}),"facilities"===P&&(0,t.jsx)(n,{facilities:g,isLoading:k,onSelectFacility:e=>{a({lat:e.latitude,lng:e.longitude,name:e.facilityName})}}),"weather"===P&&(0,t.jsx)(d,{weather:p,isLoading:S})]})]}),(0,t.jsx)("button",{onClick:()=>$(!M),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-white border border-gray-200 rounded-r-lg p-2 shadow-md hover:bg-gray-50 transition-colors",style:{left:M?"384px":"0"},children:(0,t.jsx)("svg",{className:`w-5 h-5 text-gray-600 transition-transform ${M?"":"rotate-180"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(o,{initialCenter:[-105.2705,40.015],initialZoom:10,onMapClick:_,watershedBoundary:c?.boundary,flowlines:b,gauges:m.map(e=>({siteId:e.siteId,siteName:e.siteName,latitude:e.latitude,longitude:e.longitude,dischargeCfs:e.latestReading?.dischargeCfs,gageHeightFt:e.latestReading?.gageHeightFt})),facilities:g.map(e=>({registryId:e.registryId,facilityName:e.facilityName,latitude:e.latitude,longitude:e.longitude,isMajorDischarger:e.isMajorDischarger,complianceStatus:e.complianceStatus})),selectedLocation:e}),(0,t.jsxs)("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow-lg p-3 text-xs text-gray-600",children:[(0,t.jsx)("p",{className:"font-semibold mb-1",children:"Map Legend"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500 border-2 border-green-700"}),(0,t.jsx)("span",{children:"Stream Gauge"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded bg-yellow-500 border-2 border-yellow-700"}),(0,t.jsx)("span",{children:"EPA Facility"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded bg-red-500 border-2 border-red-700"}),(0,t.jsx)("span",{children:"Violation"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 rounded-sm bg-blue-500 opacity-30 border border-blue-600"}),(0,t.jsx)("span",{children:"Watershed"})]})]})]})]})]})}e.s(["default",()=>c],20734)}]);